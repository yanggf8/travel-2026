{
  "project": "Nagoya Travel 2026",
  "version": "3.0.0",
  "currency": "TWD",
  "default_timezone": "Asia/Tokyo",
  "meta": {
    "readiness_definition": "Can proceed to next dependent process",
    "status_values": [
      "pending",
      "researched",
      "selected",
      "booked",
      "confirmed"
    ],
    "datetime_format": "ISO-8601 with timezone offset (e.g., 2026-02-11T10:00:00+09:00)",
    "datetime_policy": {
      "offset_is_authoritative": true,
      "timezone_fields_optional": true,
      "default_timezone_applies_when_timezone_missing": true
    },
    "readiness_rule_language": "v1"
  },
  "readiness_rules": {
    "process_1_date_anchor": {
      "ready_to_proceed": {
        "all": [
          {
            "type": "present",
            "path": "process_1_date_anchor.set_out_date"
          },
          {
            "type": "present",
            "path": "process_1_date_anchor.duration_days"
          },
          {
            "type": "present",
            "path": "process_1_date_anchor.return_date"
          }
        ]
      },
      "milestones": {
        "confirmed": {
          "all": [
            {
              "type": "present",
              "path": "process_1_date_anchor.set_out_date"
            },
            {
              "type": "present",
              "path": "process_1_date_anchor.duration_days"
            },
            {
              "type": "present",
              "path": "process_1_date_anchor.return_date"
            }
          ]
        }
      }
    },
    "process_2_destination": {
      "ready_to_proceed": {
        "all": [
          {
            "type": "present",
            "path": "process_2_destination.destination_country"
          },
          {
            "type": "min_length",
            "path": "process_2_destination.cities",
            "min": 1
          }
        ]
      },
      "milestones": {
        "confirmed": {
          "all": [
            {
              "type": "present",
              "path": "process_2_destination.origin_city"
            },
            {
              "type": "present",
              "path": "process_2_destination.destination_country"
            },
            {
              "type": "min_length",
              "path": "process_2_destination.cities",
              "min": 1
            }
          ]
        }
      }
    },
    "process_3_transportation": {
      "ready_to_proceed": {
        "all": [
          {
            "type": "present",
            "path": "process_3_transportation.flight.outbound.airline"
          },
          {
            "type": "present",
            "path": "process_3_transportation.flight.outbound.departure_airport"
          },
          {
            "type": "present",
            "path": "process_3_transportation.flight.outbound.arrival_airport"
          },
          {
            "type": "present",
            "path": "process_3_transportation.flight.outbound.departure_datetime"
          }
        ]
      },
      "milestones": {
        "researched": {
          "any": [
            {
              "type": "min_length",
              "path": "process_3_transportation.flight.candidates",
              "min": 1
            },
            {
              "type": "min_length",
              "path": "process_3_transportation.home_to_airport.candidates",
              "min": 1
            },
            {
              "type": "min_length",
              "path": "process_3_transportation.airport_to_hotel.candidates",
              "min": 1
            }
          ]
        },
        "selected": {
          "all": [
            {
              "type": "present",
              "path": "process_3_transportation.flight.outbound.airline"
            },
            {
              "type": "present",
              "path": "process_3_transportation.flight.outbound.departure_airport"
            },
            {
              "type": "present",
              "path": "process_3_transportation.flight.outbound.arrival_airport"
            },
            {
              "type": "present",
              "path": "process_3_transportation.flight.outbound.departure_datetime"
            }
          ]
        },
        "booked": {
          "all": [
            {
              "type": "present",
              "path": "process_3_transportation.flight.outbound.booking_ref"
            },
            {
              "type": "present",
              "path": "process_3_transportation.flight.return.booking_ref"
            }
          ]
        }
      }
    },
    "process_4_accommodation": {
      "ready_to_proceed": {
        "all": [
          {
            "type": "present",
            "path": "process_4_accommodation.location_zone.selected_area"
          }
        ]
      },
      "milestones": {
        "zone_researched": {
          "all": [
            {
              "type": "min_length",
              "path": "process_4_accommodation.location_zone.candidates",
              "min": 1
            }
          ]
        },
        "zone_selected": {
          "all": [
            {
              "type": "present",
              "path": "process_4_accommodation.location_zone.selected_area"
            }
          ]
        },
        "hotel_researched": {
          "all": [
            {
              "type": "min_length",
              "path": "process_4_accommodation.hotel.candidates",
              "min": 1
            }
          ]
        },
        "hotel_selected": {
          "all": [
            {
              "type": "present",
              "path": "process_4_accommodation.hotel.selected_hotel"
            }
          ]
        },
        "hotel_booked": {
          "all": [
            {
              "type": "present",
              "path": "process_4_accommodation.hotel.booking.confirmation_number"
            }
          ]
        }
      }
    },
    "process_5_daily_itinerary": {
      "_comment": "Rules relaxed: arrival days need evening activity, departure days need morning activity, full days need morning+afternoon",
      "ready_to_proceed": {
        "all": [
          {
            "type": "for_each",
            "path": "process_5_daily_itinerary.days",
            "any": [
              {
                "type": "min_length",
                "path": "morning.activities",
                "min": 1
              },
              {
                "type": "min_length",
                "path": "afternoon.activities",
                "min": 1
              },
              {
                "type": "min_length",
                "path": "evening.activities",
                "min": 1
              }
            ]
          }
        ]
      },
      "milestones": {
        "researched": {
          "all": [
            {
              "type": "for_each",
              "path": "process_5_daily_itinerary.days",
              "any": [
                {
                  "type": "min_length",
                  "path": "morning.activities",
                  "min": 1
                },
                {
                  "type": "min_length",
                  "path": "afternoon.activities",
                  "min": 1
                },
                {
                  "type": "min_length",
                  "path": "evening.activities",
                  "min": 1
                }
              ]
            }
          ]
        },
        "selected": {
          "all": [
            {
              "type": "for_each",
              "path": "process_5_daily_itinerary.days",
              "any": [
                {
                  "type": "min_length",
                  "path": "morning.activities",
                  "min": 1
                },
                {
                  "type": "min_length",
                  "path": "afternoon.activities",
                  "min": 1
                },
                {
                  "type": "min_length",
                  "path": "evening.activities",
                  "min": 1
                }
              ]
            }
          ]
        },
        "confirmed": {
          "all": [
            {
              "type": "for_each",
              "path": "process_5_daily_itinerary.days",
              "any": [
                {
                  "type": "min_length",
                  "path": "morning.activities",
                  "min": 1
                },
                {
                  "type": "min_length",
                  "path": "afternoon.activities",
                  "min": 1
                },
                {
                  "type": "min_length",
                  "path": "evening.activities",
                  "min": 1
                }
              ]
            }
          ]
        }
      }
    }
  },
  "budget": {
    "total_cap": null,
    "flight_cap": null,
    "accommodation_cap": null,
    "daily_cap": null
  },
  "process_1_date_anchor": {
    "status": "confirmed",
    "set_out_date": "2026-02-11",
    "duration_days": 5,
    "return_date": "2026-02-15"
  },
  "process_2_destination": {
    "status": "confirmed",
    "origin_city": "Taipei",
    "origin_country": "Taiwan",
    "destination_country": "Japan",
    "region": "Chubu",
    "cities": [
      {
        "name": "Nagoya",
        "role": "primary",
        "nights": 4,
        "attractions": [
          "Nagoya Castle",
          "Atsuta Shrine",
          "Osu Shopping District",
          "Sakae",
          "Toyota Commemorative Museum",
          "Nagoya Station Area"
        ]
      },
      {
        "name": "Takayama",
        "role": "day_trip",
        "nights": 0,
        "attractions": [
          "Old Town (Sanmachi Suji)",
          "Takayama Jinya",
          "Morning Markets"
        ]
      },
      {
        "name": "Inuyama",
        "role": "day_trip",
        "nights": 0,
        "attractions": [
          "Inuyama Castle (National Treasure)",
          "Meiji Mura",
          "Urakuen Garden"
        ]
      }
    ],
    "shopping": [
      {
        "type": "second_hand_luxury",
        "stores": [
          "KOMEHYO Nagoya Main Store",
          "BRAND OFF Nagoya Sakae",
          "Daikokuya Nagoya"
        ]
      },
      {
        "type": "general",
        "stores": [
          "Osu Shopping Street",
          "JR Gate Tower",
          "Mitsukoshi Sakae"
        ]
      }
    ],
    "local_food": [
      "Hitsumabushi (鰻魚飯)",
      "Miso Katsu (味噌豬排)",
      "Tebasaki (手羽先)",
      "Kishimen (棊子麵)",
      "Taiwan Ramen (台灣拉麵)"
    ]
  },
  "process_3_transportation": {
    "status": "researched",
    "flight": {
      "status": "researched",
      "outbound": {
        "airline": null,
        "flight_number": null,
        "departure_airport": null,
        "departure_airport_code": null,
        "arrival_airport": null,
        "arrival_airport_code": null,
        "departure_datetime": null,
        "departure_timezone": null,
        "arrival_datetime": null,
        "arrival_timezone": null,
        "fare": null,
        "fare_class": null,
        "booking_ref": null,
        "booking_url": null,
        "notes": null
      },
      "return": {
        "airline": null,
        "flight_number": null,
        "departure_airport": null,
        "departure_airport_code": null,
        "arrival_airport": null,
        "arrival_airport_code": null,
        "departure_datetime": null,
        "departure_timezone": null,
        "arrival_datetime": null,
        "arrival_timezone": null,
        "fare": null,
        "fare_class": null,
        "booking_ref": null,
        "booking_url": null,
        "notes": null
      },
      "candidates": [
        {
          "id": "flight_ngo_tigerair_001",
          "type": "roundtrip",
          "source": "research",
          "airline": "Tigerair Taiwan",
          "route": "TPE-NGO",
          "outbound": {
            "flight_number": "IT206",
            "departure_airport": "Taipei Taoyuan Airport",
            "departure_airport_code": "TPE",
            "arrival_airport": "Nagoya Chubu Centrair Airport",
            "arrival_airport_code": "NGO",
            "departure_datetime": "2026-02-11T09:00:00+08:00",
            "arrival_datetime": "2026-02-11T12:55:00+09:00",
            "duration_minutes": 175
          },
          "return": {
            "flight_number": "IT207",
            "departure_airport": "Nagoya Chubu Centrair Airport",
            "departure_airport_code": "NGO",
            "arrival_airport": "Taipei Taoyuan Airport",
            "arrival_airport_code": "TPE",
            "departure_datetime": "2026-02-15T13:45:00+09:00",
            "arrival_datetime": "2026-02-15T15:55:00+08:00",
            "duration_minutes": 190
          },
          "passengers": 2,
          "total_price_estimate": 13400,
          "price_per_person_estimate": 6700,
          "currency": "TWD",
          "price_note": "Estimate based on normal pricing ~NT$6,699 round-trip, may vary for CNY period",
          "pros": [
            "Daily flights - flexible",
            "Good times (09:00 out, 13:45 return)",
            "Arrive home by 16:00",
            "Direct to destination city",
            "February is cheapest month for NGO"
          ],
          "cons": [
            "CNY period may have slight price increase",
            "Need to check actual price on booking"
          ]
        }
      ]
    },
    "home_to_airport": {
      "status": "pending",
      "method": null,
      "route_description": null,
      "departure_point": null,
      "arrival_point": null,
      "departure_time": null,
      "duration_minutes": null,
      "cost": null,
      "booking_ref": null,
      "candidates": [],
      "notes": null
    },
    "airport_to_hotel": {
      "status": "pending",
      "method": null,
      "route_description": null,
      "departure_point": null,
      "arrival_point": null,
      "departure_time": null,
      "duration_minutes": null,
      "cost": null,
      "booking_ref": null,
      "candidates": [],
      "notes": null
    }
  },
  "process_4_accommodation": {
    "status": "pending",
    "location_zone": {
      "status": "pending",
      "selected_area": null,
      "selection_criteria": null,
      "candidates": [
        {
          "id": "zone_nagoya_station",
          "name": "Nagoya Station Area",
          "name_local": "名古屋駅",
          "description": "Main transportation hub, best for day trips",
          "pros": ["Best transport access", "JR Gate Tower shopping", "Easy airport access"],
          "cons": ["Less local atmosphere", "Higher prices"]
        },
        {
          "id": "zone_sakae",
          "name": "Sakae",
          "name_local": "栄",
          "description": "Downtown entertainment and shopping district",
          "pros": ["Nightlife", "Shopping", "Osu nearby"],
          "cons": ["Further from station for day trips"]
        },
        {
          "id": "zone_fushimi",
          "name": "Fushimi",
          "name_local": "伏見",
          "description": "Between Nagoya Station and Sakae, quieter area",
          "pros": ["Quieter", "Good value", "Central location"],
          "cons": ["Less exciting"]
        }
      ]
    },
    "hotel": {
      "status": "pending",
      "selected_hotel": null,
      "candidates": [],
      "booking": {
        "confirmation_number": null,
        "check_in_date": null,
        "check_in_time": null,
        "check_out_date": null,
        "check_out_time": null,
        "room_type": null,
        "total_price": null,
        "price_per_night": null,
        "cancellation_policy": null,
        "cancellation_deadline": null,
        "booking_url": null
      }
    }
  },
  "process_5_daily_itinerary": {
    "status": "pending",
    "days": [
      {
        "date": "2026-02-11",
        "day_number": 1,
        "day_type": "arrival",
        "status": "pending",
        "morning": {
          "time_block": {"start": "09:00", "end": "12:00"},
          "activities": [],
          "notes": "Flight departs TPE 09:00"
        },
        "afternoon": {
          "time_block": {"start": "12:00", "end": "18:00"},
          "activities": [
            {"id": "act_d1_1", "name": "Arrive NGO 12:55, transfer to hotel", "type": "transport"}
          ],
          "notes": "Check-in, rest, explore hotel area"
        },
        "evening": {
          "time_block": {"start": "18:00", "end": null},
          "activities": [
            {"id": "act_d1_2", "name": "Hitsumabushi Dinner (鰻魚飯)", "type": "food", "location": {"area": "Nagoya Station or Sakae"}}
          ],
          "notes": null
        }
      },
      {
        "date": "2026-02-12",
        "day_number": 2,
        "day_type": "full",
        "status": "pending",
        "morning": {
          "time_block": {"start": "09:00", "end": "12:00"},
          "activities": [
            {"id": "act_d2_1", "name": "Nagoya Castle (名古屋城)", "type": "sightseeing"}
          ],
          "notes": null
        },
        "afternoon": {
          "time_block": {"start": "12:00", "end": "18:00"},
          "activities": [
            {"id": "act_d2_2", "name": "Miso Katsu Lunch (味噌豬排)", "type": "food"},
            {"id": "act_d2_3", "name": "Osu Shopping District (大須商店街)", "type": "shopping"}
          ],
          "notes": "Second-hand luxury stores in Osu/Sakae"
        },
        "evening": {
          "time_block": {"start": "18:00", "end": null},
          "activities": [
            {"id": "act_d2_4", "name": "Sakae Nightlife", "type": "entertainment"}
          ],
          "notes": null
        }
      },
      {
        "date": "2026-02-13",
        "day_number": 3,
        "day_type": "full",
        "status": "pending",
        "morning": {
          "time_block": {"start": "09:00", "end": "12:00"},
          "activities": [
            {"id": "act_d3_1", "name": "Atsuta Shrine (熱田神宮)", "type": "sightseeing"}
          ],
          "notes": "One of Japan's most important shrines"
        },
        "afternoon": {
          "time_block": {"start": "12:00", "end": "18:00"},
          "activities": [
            {"id": "act_d3_2", "name": "Toyota Commemorative Museum", "type": "museum"},
            {"id": "act_d3_3", "name": "Noritake Garden", "type": "sightseeing"}
          ],
          "notes": null
        },
        "evening": {
          "time_block": {"start": "18:00", "end": null},
          "activities": [
            {"id": "act_d3_4", "name": "Tebasaki Dinner (手羽先)", "type": "food", "location": {"name": "Sekai no Yamachan or Furaibo"}}
          ],
          "notes": null
        }
      },
      {
        "date": "2026-02-14",
        "day_number": 4,
        "day_type": "full",
        "status": "pending",
        "morning": {
          "time_block": {"start": "08:00", "end": "12:00"},
          "activities": [
            {"id": "act_d4_1", "name": "Day trip to Inuyama", "type": "day_trip", "notes": "30min from Nagoya by Meitetsu"}
          ],
          "notes": "Inuyama Castle is a National Treasure"
        },
        "afternoon": {
          "time_block": {"start": "12:00", "end": "18:00"},
          "activities": [
            {"id": "act_d4_2", "name": "Inuyama Castle (犬山城)", "type": "sightseeing"},
            {"id": "act_d4_3", "name": "Inuyama Old Town & Castle Town", "type": "walking"}
          ],
          "notes": "Valentine's Day - castle town has nice cafes"
        },
        "evening": {
          "time_block": {"start": "18:00", "end": null},
          "activities": [
            {"id": "act_d4_4", "name": "Return to Nagoya, special dinner", "type": "food"}
          ],
          "notes": "Valentine's Day dinner"
        }
      },
      {
        "date": "2026-02-15",
        "day_number": 5,
        "day_type": "departure",
        "status": "pending",
        "morning": {
          "time_block": {"start": "09:00", "end": "12:00"},
          "activities": [
            {"id": "act_d5_1", "name": "Check-out, last shopping at JR Gate Tower", "type": "shopping"},
            {"id": "act_d5_2", "name": "Travel to NGO Airport", "type": "transport", "notes": "μ-sky 28min from Nagoya Station"}
          ],
          "notes": "Flight IT207 departs 13:45"
        },
        "afternoon": {
          "time_block": {"start": "12:00", "end": null},
          "activities": [
            {"id": "act_d5_3", "name": "Depart NGO 13:45 → Arrive TPE 15:55", "type": "transport"}
          ],
          "notes": "Home by dinner time"
        },
        "evening": {
          "time_block": {"start": null, "end": null},
          "activities": [],
          "notes": "Back in Taiwan"
        }
      }
    ]
  },
  "schemas": {
    "flight_candidate": {
      "id": null,
      "airline": null,
      "flight_number": null,
      "departure_airport": null,
      "departure_airport_code": null,
      "arrival_airport": null,
      "arrival_airport_code": null,
      "departure_datetime": null,
      "departure_timezone": null,
      "arrival_datetime": null,
      "arrival_timezone": null,
      "duration_minutes": null,
      "stops": 0,
      "layover_airports": [],
      "fare": null,
      "fare_class": null,
      "baggage_included": null,
      "refundable": false,
      "booking_url": null,
      "pros": [],
      "cons": []
    },
    "transport_candidate": {
      "id": null,
      "method": null,
      "operator": null,
      "route_description": null,
      "departure_point": null,
      "arrival_point": null,
      "departure_time": null,
      "duration_minutes": null,
      "cost": null,
      "booking_required": false,
      "booking_url": null,
      "frequency": null,
      "pros": [],
      "cons": []
    },
    "zone_candidate": {
      "id": null,
      "name": null,
      "description": null,
      "pros": [],
      "cons": [],
      "main_stations": [],
      "hotel_price_range": {
        "min": null,
        "max": null
      },
      "distance_to_center": null,
      "vibe": null
    },
    "hotel_candidate": {
      "id": null,
      "name": null,
      "address": null,
      "area": null,
      "rating": null,
      "review_count": null,
      "price_per_night": null,
      "total_price": null,
      "amenities": [],
      "room_types": [],
      "distance_to_station": null,
      "nearest_station": null,
      "booking_url": null,
      "cancellation_policy": null,
      "pros": [],
      "cons": []
    },
    "activity": {
      "id": null,
      "name": null,
      "type": null,
      "location": {
        "name": null,
        "address": null,
        "coordinates": {
          "lat": null,
          "lng": null
        },
        "nearest_station": null,
        "walking_minutes_from_station": null
      },
      "time": {
        "start": null,
        "end": null,
        "duration_minutes": null,
        "flexible": false
      },
      "cost": {
        "admission": null,
        "estimated_spending": null,
        "currency": "TWD"
      },
      "booking": {
        "required": false,
        "booking_ref": null,
        "booking_url": null,
        "booked": false
      },
      "transit_to_next": {
        "method": null,
        "duration_minutes": null,
        "cost": null,
        "route": null
      },
      "notes": null,
      "priority": null,
      "weather_dependent": false
    }
  }
}